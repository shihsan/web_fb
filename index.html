<!doctype html>
<html prefix="og:http://ogp.me/ns#" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
	<meta charset="utf-8">
	<meta property="og:title" content="fb API" >
	<meta property="og:type" content="website" >
	<meta property="og:url" content="http://shihsan.github.io/web_fb/" >
	<meta property="og:image" content="" >
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<title>Facebook</title>
</head>
<body>
	<script>
	window.fbAsyncInit = function () {
            FB.init({
                appId: '566549573460943', //api 2.0 nccu web test
                xfbml: true,
                version: 'v2.0'
            });

            FB.getLoginStatus(function (response) {
                if (response.status === 'connected') {

                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;
                    FB.api('/me', function (response) {
                        console.log(response);
                        console.log('My links is' + response.link);
                        console.log('My Username is' + response.name);
                        console.log('My ID is' + response.id);

                        var id = document.getElementById('id');
                        id.innerHTML=response.id;
                        var firstname = document.getElementById('firstname');
                        firstname.innerHTML=response.first_name;
                        var lastname = document.getElementById('lastname');
                        lastname.innerHTML=response.last_name;
                        var username = document.getElementById('username');
                        username.innerHTML=response.name;
                        // var profile = document.getElementById('profile');
                        // profile.innerHTML=response.profile;
                    });


                    FB.ui({
                        method: 'share',
                        href: 'https://kangw3n.github.io/facebook/',
                    }, function (response) {
                    	if (response && !response.error_code) {
      						alert('Posting completed.');
    					} else {
      						alert('Error while posting.');
    					}
                    });
					
					


                    /*FB.ui({
                        method: 'send',
                        link: 'http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html',
                    });*/

					FB.api('/me/likes', function (response) {
                        for (var i = 0; i < response.length; i++){
							console.log(response.data.name);
							}
                    });
					
					FB.api('/me/picture?type=normal', function(response) { // normal/large/squere 
						var str="<img src="+ response.data.url +">";
						$('body').append(str);
					});
					
					
					
					/*FB.api('/me/photos', 'post', {
						name: 'this is a new photo',
						message: 'this is parse photo',
						url: "img/overlay.png"
					}, function (response) {
						if (!response || response.error) {
							alert('Error occured:' + response);
						} else {
							alert('Post ID: ' + response.id);
						}
					});
*/					



                } else if (response.status === 'not_authorized') {
                    console.log("this user is not authorizied your apps");
                    FB.login(function (response) {
                        // FB.api('/me/feed', 'post', {message: 'I\'m started using FB API'});
                        if (response.authResponse) { // if user login to your apps right after handle an event
                            window.location.reload();
                        };
                    }/*, {
                        scope: 'user_about_me,email,user_location,user_photos,publish_actions,user_birthday,user_likes'
                    }*/);
                } else {
                    console.log("this isn't logged in to Facebook.");
                    FB.login(function (response) {
                        if (response.authResponse) {
                            window.location.reload();
                        } else {
                            //alertify.alert('An Error has Occurs,Please Reload your Pages');
                        }
                    });
                }
            });




        }; //<<<<<<<<<<<<<<<init end

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

// 	window.fbAsyncInit = function() {
// 		FB.init({
// 			appId      : '566549573460943',
// 			xfbml      : true,
// 			version    : 'v2.0'
// 		});
// 	};

// 	(function(d, s, id){
// 		var js, fjs = d.getElementsByTagName(s)[0];
// 		if (d.getElementById(id)) {return;}
// 		js = d.createElement(s); js.id = id;
// 		js.src = "//connect.facebook.net/en_US/sdk.js";
// 		fjs.parentNode.insertBefore(js, fjs);
// 	}(document, 'script', 'facebook-jssdk'));

// 	FB.getLoginStatus(function(response) {
// 		if (response.status === 'connected') {
//     // the user is logged in and has authenticated your
//     // app, and response.authResponse supplies
//     // the user's ID, a valid access token, a signed
//     // request, and the time the access token 
//     // and signed request each expire
//     var uid = response.authResponse.userID;
//     var accessToken = response.authResponse.accessToken;
// } else if (response.status === 'not_authorized') {
//     // the user is logged in to Facebook, 
//     // but has not authenticated your app
// } else {
//     // the user isn't logged in to Facebook.
// }
// });

// 	FB.login(function(response) {
// 		if (response.authResponse) {
// 			console.log('Welcome!  Fetching your information.... ');
// 			FB.api('/me', function(response) {
// 				console.log('Good to see you, ' + response.name + '.');
// 			});
// 		} else {
// 			console.log('User cancelled login or did not fully authorize.');
// 		}
// 	});

// 	FB.login(function(response) {
//    // handle the response
// }, {scope: 'email,user_likes'});

	</script>
	<h1>笨蛋</h1>
	<div id="id"></div>
	<div id="firstname"></div>
	<div id="lastname"></div>
	<div id="username"></div>
<!-- 	<div id="profile"></div>
 -->
</body>
</html>